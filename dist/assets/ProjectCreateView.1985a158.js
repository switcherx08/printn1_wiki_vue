import{_ as y,o,c as m,a as e,F as h,G as D,D as C,n as u,r as $,H as U,J as N,C as _,i,j as n,p as B,I as A,m as f,K as q,L as V,k as j,M as H,q as R,N as E,v as M}from"./index.1e9ddc63.js";import{P as G}from"./PageCard.f61124f3.js";import{L as O}from"./Lb-Card.0f0ea9c1.js";import{B as J,a as I,b as P,c as Q,I as W,d as z,e as X,M as K,S as Y,f as Z,g as ee}from"./SimpleTableCell.c8ae6355.js";const te={name:"LbSteps",props:{itemsData:{type:Object,required:!0},isHorizontal:{type:Boolean,required:!1,default:!1},isLeft:{type:Boolean,required:!1,default:!1}},emits:["change"],data(){return{activeStepKey:this.itemsData[0].key,activeStepIndex:0}},methods:{changeStep(t){this.activeStepKey=t.key,this.$emit("change",t)},prevStep(){if(parseInt(this.activeStepIndex)-1<=0){this.changeStep(this.itemsData[0]),this.activeStepIndex=0;return}this.changeStep(this.itemsData[this.activeStepIndex-1]),this.activeStepIndex=this.activeStepIndex-1},nextStep(){Object.keys(this.itemsData).length!==this.activeStepIndex+1&&(this.changeStep(this.itemsData[this.activeStepIndex+1]),this.activeStepIndex=this.activeStepIndex+1)}}},se=["data-horizontal","data-left"],ae={class:"stepper__bar"},ne=["data-horizontal","onClick"],ie={class:"stepper-segment__info"},le={class:"stepper-segment__number"},ce={class:"stepper-segment__name"},oe={class:"stepper__bar-footer mt-4"},de={class:"stepper__content"};function re(t,s,a,v,c,l){return o(),m("div",{class:"stepper","data-horizontal":a.isHorizontal,"data-left":a.isLeft},[e("div",ae,[(o(!0),m(h,null,D(a.itemsData,(d,p)=>(o(),m("ul",{key:p,class:"flex flex-col"},[e("li",{class:C(["stepper-segment",[{is_active:c.activeStepKey===d.key},{is_last:Object.keys(a.itemsData).length===p+1}]]),"data-horizontal":a.isHorizontal,onClick:k=>l.changeStep(d)},[e("button",{class:C(["button stepper-marker",{is_active:c.activeStepKey===d.key}])},null,2),e("div",ie,[e("div",le,"\u0428\u0430\u0433 "+u(p+1),1),e("div",ce,u(d.name),1)])],10,ne)]))),128)),e("div",oe,[$(t.$slots,"footer")])]),e("div",de,[$(t.$slots,"default")])],8,se)}var _e=y(te,[["render",re]]);const me={name:"LbModal",emits:["close"],data(){return{isShow:!1}},methods:{show(){this.isShow=!0},hide(){this.isShow=!1,this.$emit("close")}}},he=["checked"],ue={class:"modal"},fe={class:"modal-box relative"};function pe(t,s,a,v,c,l){return o(),m(h,null,[e("input",{type:"checkbox",checked:c.isShow,class:"modal-toggle"},null,8,he),e("div",ue,[e("div",fe,[e("label",{class:"btn btn-sm btn-circle absolute right-2 top-2",onClick:s[0]||(s[0]=d=>l.hide())},"\u2715"),$(t.$slots,"header"),$(t.$slots,"body")])])],64)}var F=y(me,[["render",pe]]);const be={},ke={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",role:"img",width:"1em",height:"1em",viewBox:"0 0 24 24"},ge=e("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),ve=[ge];function Se(t,s){return o(),m("svg",ke,ve)}var ye=y(be,[["render",Se]]);const xe={name:"StepTeam",components:{LbCard:O,AvatarUser:U,BaseSimpleButton:N,BaseRadio:J,BaseInput:I,BaseCheckbox:P,LbModal:F,IconUser:ye},emits:["changeLiable","changeTeam"],data(){return{teamList:[],searchTeamResult:{},liable:{}}},watch:{liable:{handler(){this.$emit("changeLiable",this.liable)},deep:!0},teamList:{handler(){this.$emit("changeTeam",this.teamList)},deep:!0}},created(){const t={name:"\u0414\u044E\u0436\u0438\u043A\u043E\u0432 \u0415.\u0410.",work_status:"\u041C\u0435\u043D\u0435\u0436\u0434\u0435\u0440 \u043F\u0440\u043E\u0435\u043A\u0442\u0430",image:"/images/avatars/image/18.jpg"};this.selectLiable(t)},methods:{changeLiable(){this.$refs.ChangeLiable.show()},selectLiable(t){this.liable=t,this.addSearchTeamItemToTeamList(t)},addTeam(){this.$refs.AddTeam.show()},searchTeam(t){console.log(t);const a={0:{id:1,name:"Name 1",work_status:"\u0413\u043B\u0430\u0432\u043D\u044B\u0439 \u0431\u0443\u0445\u0433\u0430\u043B\u0442\u0435\u0440",image:"/images/avatars/image/5.jpg"},1:{id:2,name:"Name 2",work_status:"\u0411\u0443\u0445\u0433\u0430\u043B\u0442\u0435\u0440",image:"/images/avatars/image/36.jpg"},2:{id:3,name:"Name 3",work_status:"\u0411\u0443\u0445\u0433\u0430\u043B\u0442\u0435\u0440",image:"/images/avatars/image/15.jpg"},3:{id:4,name:"Name 4",work_status:"\u041C\u0435\u043D\u0435\u0436\u0434\u0435\u0440 \u043F\u0440\u043E\u0435\u043A\u0442\u0430",image:"/images/avatars/image/18.jpg"}};this.setSearchTeamResult(a)},setSearchTeamResult(t){this.searchTeamResult=t},clearSearchTeamResult(){this.searchTeamResult={}},addSearchTeamItemToTeamList(t){if(this.teamList.length===0){this.teamList.push(t);return}this.teamList.filter(a=>a.id===t.id).length===0&&this.teamList.push(t)},removeItemFromTeamList(t){for(let s=0;s<this.teamList.length;s++)if(t.id===this.teamList[s].id){if(t.id!==this.liable.id){this.teamList.splice(s,1);return}this.$notify({title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E!",text:"\u041D\u0435\u043B\u044C\u0437\u044F \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0438\u0437 \u043A\u043E\u043C\u0430\u043D\u0434\u044B \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044F \u043F\u0440\u043E\u0435\u043A\u0442\u0430!",duration:5e3,speed:1e3,type:"info"})}}}},Be={class:"mb-8"},Ce={class:"liable flex mb-8"},De={class:"liable__info flex flex-col justify-center"},we={class:"liable__name"},Le={class:"liable__work-status"},$e={class:"liable__actions mt-3"},Te=f("\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"),je={class:"flex justify-between items-center mt-8 mb-4"},Ae=e("h4",null,"\u041A\u043E\u043C\u0430\u043D\u0434\u0430",-1),Me=f("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u0430"),Re={class:"team flex flex-col"},Ne={class:"flex"},Ie={class:"team__image"},Oe={class:"team__info flex flex-col w-full"},Pe={class:"team__name"},ze={class:"team__work-status"},Ke={class:"team__actions flex items-center"},Fe=f(" \u0423\u0431\u0440\u0430\u0442\u044C "),Ue=e("h3",{class:"text-lg font-bold mb-4"},"\u0420\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C \u043F\u0440\u043E\u0435\u043A\u0442\u0430",-1),qe=e("p",{class:"pb-4"},"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0438\u043C\u044F \u043D\u043E\u0432\u043E\u0433\u043E \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044F \u0432 \u043F\u043E\u043B\u0435 \u043F\u043E\u0438\u0441\u043A\u0430 \u0438\u043B\u0438 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043F\u0438\u0441\u043A\u0430",-1),Ve=f("\u041F\u043E\u0438\u0441\u043A \u0441\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u0430"),He={class:"team flex flex-col"},Ee={class:"flex"},Ge={class:"team__image"},Je={class:"team__info flex flex-col w-full"},Qe={class:"team__name"},We={class:"team__work-status"},Xe={class:"team__actions flex items-center"},Ye=e("h3",{class:"text-lg font-bold mb-4"},"\u0423\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0438 \u043F\u0440\u043E\u0435\u043A\u0442\u0430",-1),Ze=e("p",{class:"pb-4"},"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0438\u043C\u044F \u043D\u043E\u0432\u043E\u0433\u043E \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0430 \u043F\u0440\u043E\u0435\u043A\u0442\u0430 \u0432 \u043F\u043E\u043B\u0435 \u043F\u043E\u0438\u0441\u043A\u0430 \u0438\u043B\u0438 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043F\u0438\u0441\u043A\u0430",-1),et=f("\u041F\u043E\u0438\u0441\u043A \u0441\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u0430"),tt={class:"team flex flex-col"},st={class:"flex"},at={class:"team__image"},nt={class:"team__info flex flex-col w-full"},it={class:"team__name"},lt={class:"team__work-status"},ct={class:"team__actions flex items-center"};function ot(t,s,a,v,c,l){const d=_("AvatarUser"),p=_("BaseSimpleButton"),k=_("LbCard"),S=_("IconUser"),g=_("BaseInput"),T=_("BaseRadio"),w=_("LbModal"),b=_("BaseCheckbox");return o(),m(h,null,[e("div",Be,[e("div",Ce,[i(d,{alt:c.liable.name,"is-rounded":!1,picture:c.liable.image,class:"liable__image is-128x128 mr-6"},null,8,["alt","picture"]),e("div",De,[e("div",we,[e("h2",null,u(c.liable.name),1)]),e("div",Le,u(c.liable.work_status),1),e("div",$e,[i(p,{"is-outline":"",size:"small",onClick:l.changeLiable},{default:n(()=>[Te]),_:1},8,["onClick"])])])]),e("div",je,[Ae,i(p,{"is-primary":"",size:"small",onClick:l.addTeam},{default:n(()=>[Me]),_:1},8,["onClick"])]),e("div",Re,[i(A,{name:"list"},{default:n(()=>[(o(!0),m(h,null,D(c.teamList,(r,x)=>(o(),B(k,{key:x,"use-padding":!1,class:"team__item flex p-2 mb-6"},{default:n(()=>[e("div",Ne,[e("div",Ie,[i(d,{alt:r.name,picture:r.image,class:"is-42x42 mr-3"},null,8,["alt","picture"])]),e("div",Oe,[e("div",Pe,u(r.name),1),e("div",ze,u(r.work_status),1)]),e("div",Ke,[i(p,{"is-outline":"",size:"small",onClick:L=>l.removeItemFromTeamList(r)},{default:n(()=>[Fe]),_:2},1032,["onClick"])])])]),_:2},1024))),128))]),_:1})])]),i(w,{ref:"ChangeLiable",onClose:l.clearSearchTeamResult},{header:n(()=>[Ue]),body:n(()=>[qe,i(g,{class:"mb-6","field-autocomplete":"liable_search","field-id":"liable_search","field-name":"liable_search","field-placeholder":"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0438\u043C\u044F \u043D\u043E\u0432\u043E\u0433\u043E \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044F",onChange:s[0]||(s[0]=r=>l.searchTeam(r))},{label:n(()=>[Ve]),icon:n(()=>[i(S)]),_:1}),e("div",He,[i(A,{name:"list"},{default:n(()=>[(o(!0),m(h,null,D(c.searchTeamResult,(r,x)=>(o(),B(k,{key:x,"use-padding":!1,class:"team__item flex p-2 mb-3"},{default:n(()=>[e("div",Ee,[e("div",Ge,[i(d,{alt:r.name,picture:r.image,class:"is-42x42 mr-3"},null,8,["alt","picture"])]),e("div",Je,[e("div",Qe,u(r.name),1),e("div",We,u(r.work_status),1)]),e("div",Xe,[i(T,{onClick:L=>l.selectLiable(r)},null,8,["onClick"])])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["onClose"]),i(w,{ref:"AddTeam",onClose:l.clearSearchTeamResult},{header:n(()=>[Ye]),body:n(()=>[Ze,i(g,{class:"mb-6","field-autocomplete":"team_search","field-id":"team_search","field-name":"team_search","field-placeholder":"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0438\u043C\u044F \u043D\u043E\u0432\u043E\u0433\u043E \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0430",onChange:s[1]||(s[1]=r=>l.searchTeam(r))},{label:n(()=>[et]),icon:n(()=>[i(S)]),_:1}),e("div",tt,[i(A,{name:"list"},{default:n(()=>[(o(!0),m(h,null,D(c.searchTeamResult,(r,x)=>(o(),B(k,{key:x,"use-padding":!1,class:"team__item flex p-2 mb-3"},{default:n(()=>[e("div",st,[e("div",at,[i(d,{alt:r.name,picture:r.image,class:"is-42x42 mr-3"},null,8,["alt","picture"])]),e("div",nt,[e("div",it,u(r.name),1),e("div",lt,u(r.work_status),1)]),e("div",ct,[i(b,{onChecked:L=>l.addSearchTeamItemToTeamList(r),onUnchecked:L=>l.removeItemFromTeamList(r)},null,8,["onChecked","onUnchecked"])])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["onClose"])],64)}var dt=y(xe,[["render",ot]]);const rt={name:"BaseTextarea",components:{BaseField:Q},props:{fieldId:{type:String,required:!0},fieldName:{type:String,required:!0},fieldPlaceholder:{type:String,required:!1,default:""}},emits:["change"],data(){return{model:""}}},_t=["id","placeholder"];function mt(t,s,a,v,c,l){const d=_("BaseField"),p=q("debounce");return o(),B(d,{"field-id":a.fieldId,"field-name":a.fieldName},V({input:n(()=>[j(e("textarea",{id:`${a.fieldId}-${a.fieldName}`,"onUpdate:modelValue":s[0]||(s[0]=k=>c.model=k),placeholder:a.fieldPlaceholder,class:"field-textarea",onChange:s[1]||(s[1]=k=>t.$emit("change",c.model))},null,40,_t),[[H,c.model,void 0,{trim:!0}],[p,1e3]])]),_:2},[t.$slots.label?{name:"label",fn:n(()=>[$(t.$slots,"label")])}:void 0,t.$slots.icon?{name:"icon",fn:n(()=>[$(t.$slots,"icon")])}:void 0]),1032,["field-id","field-name"])}var ht=y(rt,[["render",mt]]);const ut={name:"StepDescription",components:{IconEdit:W,BaseTextarea:ht,BaseSelect:z,BaseInput:I},emits:["changeCategory","changeName","changeDescription"],data(){return{categories:{},selectCategory:{},name:"",description:""}},watch:{selectCategory:{handler(){this.$emit("changeCategory",this.selectCategory)},deep:!0},name(){this.$emit("changeName",this.name)},description(){this.$emit("changeDescription",this.description)}},async created(){await this.fetchCategories(),this.changeCategory(this.categories[0])},methods:{async fetchCategories(){try{this.categories=await fetch("/dist/api/project_direction_activity.json").then(t=>t.json())}catch{}},changeCategory(t){this.selectCategory=t},changeProjectName(t){this.name=t},changeProjectDescription(t){this.description=t}}},ft=f("\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F \u043F\u0440\u043E\u0435\u043A\u0442\u0430"),pt={class:"flex flex-col mb-8"},bt=f("\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0435\u043A\u0442\u0430"),kt=f("\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435");function gt(t,s,a,v,c,l){const d=_("BaseSelect"),p=_("IconEdit"),k=_("BaseInput"),S=_("BaseTextarea");return o(),m(h,null,[Object.keys(c.categories).length!==0?(o(),B(d,{key:0,"field-autocomplete":"project-category","field-id":"project-category","field-name":"category",class:"mb-4","item-data":c.categories,onSelect:s[0]||(s[0]=g=>l.changeCategory(g))},{label:n(()=>[ft]),_:1},8,["item-data"])):R("",!0),e("div",pt,[i(k,{"field-id":"project-name","field-name":"name",class:"mb-4",onChange:s[1]||(s[1]=g=>l.changeProjectName(g))},{label:n(()=>[bt]),icon:n(()=>[i(p)]),_:1}),i(S,{"field-id":"project-desc","field-name":"description","field-placeholder":"\u041A\u0440\u0430\u0442\u043A\u043E \u043E\u043F\u0438\u0448\u0438\u0442\u0435 \u043F\u0440\u043E\u0435\u043A\u0442",onChange:s[2]||(s[2]=g=>l.changeProjectDescription(g))},{label:n(()=>[kt]),_:1})])],64)}var vt=y(ut,[["render",gt]]);const St={},yt={xmlns:"http://www.w3.org/2000/svg",role:"img",width:"1em",height:"1em",viewBox:"0 0 24 24"},xt=e("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("path",{d:"m21 21l-4.35-4.35"})],-1),Bt=[xt];function Ct(t,s){return o(),m("svg",yt,Bt)}var Dt=y(St,[["render",Ct]]);const wt={name:"StepAccounts",components:{BankCard:X,IconSearch:Dt,LbCard:O,BaseSimpleButton:N,BaseSelect:z,BaseInput:I,BaseCheckbox:P,LbModal:F},mixins:[K],emits:["changeMainBankAccount","changeBankAccounts"],data(){return{banks:{},selectMainBank:{},bankList:[],searchBanksResult:{}}},computed:{mainBankAccountMask(){return Object.keys(this.selectMainBank).length===0?"":this.bankAccountMask(this.selectMainBank.account_number)}},watch:{banks:{handler(){if(Object.keys(this.selectMainBank).length===0){let s=[];for(var t in this.banks)s.push(this.banks[t]);const a=s.filter(v=>v.is_main===!0);this.$refs.MainBankSelectInput.selectOption(a[0]),this.setSearchBanksResult(s)}},deep:!0},selectMainBank:{handler(){this.$emit("changeMainBankAccount",this.selectMainBank)},deep:!0},bankList:{handler(){this.$emit("changeBankAccounts",this.bankList)},deep:!0}},async created(){await this.fetchBanks()},methods:{async fetchBanks(){try{this.banks=await fetch("/dist/api/project_bank_accounts.json").then(t=>t.json())}catch{}},setSelectMainBank(t){this.selectMainBank=t,this.addSearchBankItemToBankList(t)},addSearchBankItemToBankList(t){if(this.bankList.length===0){this.bankList.push(t);return}this.bankList.filter(a=>a.id===t.id).length===0&&this.bankList.push(t)},addBankAccount(){this.$refs.AddAccount.show()},closeModalAddBankAccount(){this.clearSearchBanksResult(),setTimeout(()=>{this.setSearchBanksResult(this.banks)},600)},searchBankAccount(t){console.log(t);const a=this.banks;this.setSearchBanksResult(a)},setSearchBanksResult(t){this.searchBanksResult=t},clearSearchBanksResult(){this.searchBanksResult={}},removeItemFromBankList(t){for(let s=0;s<this.bankList.length;s++)if(t.id===this.bankList[s].id){if(t.id!==this.selectMainBank.id){this.bankList.splice(s,1);return}this.$notify({title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E!",text:"\u041D\u0435\u043B\u044C\u0437\u044F \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043E\u0441\u043D\u043E\u0432\u043D\u043E\u0439 \u0431\u0430\u043D\u043A \u043F\u0440\u043E\u0435\u043A\u0442\u0430!",duration:5e3,speed:1e3,type:"info"})}}}},Lt={class:"mb-8"},$t={class:"bank-main flex mb-8"},Tt={class:"flex flex-col w-full"},jt=f("\u0413\u043B\u0430\u0432\u043D\u044B\u0439 \u0441\u0447\u0435\u0442"),At={class:"mb-4 text-sm text-gray-400"},Mt=e("br",null,null,-1),Rt={class:"flex justify-between items-center mt-8 mb-4"},Nt=e("h4",null,"\u0420\u0430\u0441\u0447\u0435\u0442\u043D\u044B\u0435 \u0441\u0447\u0435\u0442\u0430",-1),It=f(" \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u0447\u0435\u0442\u0430 "),Ot={class:"bank-list flex flex-col"},Pt={class:"flex"},zt={class:"team__info flex flex-col w-full"},Kt={class:"team__name"},Ft={class:"team__work-status"},Ut={class:"team__actions flex items-center"},qt=f(" \u0423\u0431\u0440\u0430\u0442\u044C "),Vt=e("h3",{class:"text-lg font-bold mb-4"},"\u0420\u0430\u0441\u0447\u0435\u0442\u043D\u044B\u0439 \u0441\u0447\u0435\u0442",-1),Ht=e("p",{class:"mb-4"},"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0411\u0418\u041A \u0431\u0430\u043D\u043A\u0430 \u0438\u043B\u0438 \u043D\u043E\u043C\u0435\u0440 \u0441\u0447\u0435\u0442\u0430 \u0434\u043B\u044F \u043F\u043E\u0438\u0441\u043A\u0430 \u0438\u043B\u0438 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043F\u0438\u0441\u043A\u0430",-1),Et=f("\u041F\u043E\u0438\u0441\u043A \u0441\u0447\u0435\u0442\u0430 \u043F\u043E \u0411\u0418\u041A \u0438\u043B\u0438 \u043D\u043E\u043C\u0435\u0440\u0443"),Gt={class:"bank-list flex flex-col"},Jt={class:"flex"},Qt={class:"team__info flex flex-col w-full"},Wt={class:"team__name"},Xt={class:"team__work-status"},Yt={class:"team__actions flex items-center"};function Zt(t,s,a,v,c,l){const d=_("BankCard"),p=_("BaseSelect"),k=_("BaseSimpleButton"),S=_("LbCard"),g=_("IconSearch"),T=_("BaseInput"),w=_("BaseCheckbox"),b=_("LbModal");return o(),m(h,null,[e("div",Lt,[e("div",$t,[i(d,{"item-data":c.selectMainBank,class:"mr-4"},null,8,["item-data"]),e("div",Tt,[i(p,{ref:"MainBankSelectInput","item-data":c.banks,class:"mb-4","field-autocomplete":"bank-main","field-id":"bank-main","field-name":"bank-main",onSelect:s[0]||(s[0]=r=>l.setSelectMainBank(r))},{label:n(()=>[jt]),_:1},8,["item-data"]),e("p",At,[f(" \u0420/\u0441: "+u(l.mainBankAccountMask),1),Mt,f(" \u0432 "+u(c.selectMainBank.name)+", \u0411\u0418\u041A "+u(c.selectMainBank.bik),1)])])]),e("div",Rt,[Nt,i(k,{"is-primary":"",size:"small",onClick:l.addBankAccount},{default:n(()=>[It]),_:1},8,["onClick"])]),e("div",Ot,[i(A,{name:"list"},{default:n(()=>[(o(!0),m(h,null,D(c.bankList,(r,x)=>(o(),B(S,{key:x,"use-padding":!1,class:"team__item flex p-2 mb-6"},{default:n(()=>[e("div",Pt,[e("div",zt,[e("div",Kt,[e("b",null,u(r.name),1)]),e("div",Ft,"\u0420/\u0441 "+u(t.bankAccountMask(r.account_number)),1)]),e("div",Ut,[i(k,{"is-outline":"",size:"small",onClick:L=>l.removeItemFromBankList(r)},{default:n(()=>[qt]),_:2},1032,["onClick"])])])]),_:2},1024))),128))]),_:1})])]),i(b,{ref:"AddAccount",onClose:l.closeModalAddBankAccount},{header:n(()=>[Vt]),body:n(()=>[Ht,i(T,{class:"mb-6","field-autocomplete":"bank_search","field-id":"bank_search","field-name":"bank_search","field-placeholder":"\u041D\u043E\u043C\u0435\u0440 \u0441\u0447\u0435\u0442\u0430 \u0438\u043B\u0438 \u0411\u0418\u041A \u0431\u0430\u043D\u043A\u0430",onChange:s[1]||(s[1]=r=>l.searchBankAccount(r))},{label:n(()=>[Et]),icon:n(()=>[i(g)]),_:1}),e("div",Gt,[i(A,{name:"list"},{default:n(()=>[(o(!0),m(h,null,D(c.searchBanksResult,(r,x)=>(o(),B(S,{key:x,"use-padding":!1,class:"team__item flex p-2 mb-6"},{default:n(()=>[e("div",Jt,[e("div",Qt,[e("div",Wt,[e("b",null,u(r.name),1)]),e("div",Xt,"\u0420/\u0441 "+u(t.bankAccountMask(r.account_number)),1)]),e("div",Yt,[i(w,{onChecked:L=>l.addSearchBankItemToBankList(r),onUnchecked:L=>l.removeItemFromBankList(r)},null,8,["onChecked","onUnchecked"])])])]),_:2},1024))),128))]),_:1})])]),_:1},8,["onClose"])],64)}var es=y(wt,[["render",Zt]]);const ts={name:"StepSave",components:{SimpleTableCell:Y,SimpleTableRow:Z,SimpleTable:ee},mixins:[K],props:{itemData:{type:Object,required:!0}},computed:{teamNames(){if(!this.itemData&&!this.itemData.team&&Object.keys(this.itemData.team).length===0)return"";let t="",s="",a=Object.keys(this.itemData.team).length;for(;a--;){let v=this.itemData.team[a].name;t&&(s=", "),t=t+s+v}return t}}},ss=f("--> "),as=e("b",null,"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F \u043F\u0440\u043E\u0435\u043A\u0442\u0430",-1),ns=e("b",null,"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F \u043F\u0440\u043E\u0435\u043A\u0442\u0430!",-1),is=e("br",null,null,-1),ls=e("span",{class:"italic"},"\u0412\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u043F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443.",-1),cs=e("b",null,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0435\u043A\u0442\u0430",-1),os=e("b",null,"\u0412\u044B \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043B\u0438 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0435\u043A\u0442\u0430!",-1),ds=e("br",null,null,-1),rs=e("span",{class:"italic"},"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0435\u043A\u0442\u0430 - \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0435 \u043F\u043E\u043B\u0435.",-1),_s=e("b",null,"\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",-1),ms=e("b",null,"\u041E\u043F\u0438\u0448\u0438\u0442\u0435 \u043F\u0440\u043E\u0435\u043A\u0442.",-1),hs=e("br",null,null,-1),us=e("span",{class:"italic"}," \u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0431\u0435\u0437 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u044F, \u043D\u043E \u043C\u044B \u0440\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u0435\u043C \u0437\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u044C \u0435\u0433\u043E. ",-1),fs=e("b",null,"\u0420\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C \u043F\u0440\u043E\u0435\u043A\u0442\u0430",-1),ps=e("b",null,"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C \u043F\u0440\u043E\u0435\u043A\u0442\u0430!",-1),bs=e("br",null,null,-1),ks=e("span",{class:"italic"},"\u0412\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u043F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443.",-1),gs=e("b",null,"\u041A\u043E\u043C\u0430\u043D\u0434\u0430",-1),vs=e("b",null,"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430 \u043A\u043E\u043C\u0430\u043D\u0434\u0430 \u043F\u0440\u043E\u0435\u043A\u0442\u0430!",-1),Ss=e("br",null,null,-1),ys=e("span",{class:"italic"},"\u0412\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u043F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443.",-1),xs=e("b",null,"\u0421\u0447\u0435\u0442\u0430",-1),Bs=f(" , "),Cs=e("br",null,null,-1),Ds=e("b",null,"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u044B \u0431\u0430\u043D\u043A\u043E\u0432\u0441\u043A\u0438\u0435 \u0441\u0447\u0435\u0442\u0430!",-1),ws=e("br",null,null,-1),Ls=e("span",{class:"italic"},"\u0412\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u043F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443.",-1);function $s(t,s,a,v,c,l){const d=_("SimpleTableCell"),p=_("SimpleTableRow"),k=_("SimpleTable");return o(),B(k,null,{tbody:n(()=>[i(p,null,{default:n(()=>[i(d,{class:"text-slate-400 align-top shrink-0",width:"230px"},{default:n(()=>[as]),_:1}),i(d,{class:C(["whitespace-normal",{"bg-red-50":!a.itemData||!a.itemData.category}])},{default:n(()=>[a.itemData&&a.itemData.category?(o(),m(h,{key:0},[f(u(a.itemData.category.name),1)],64)):(o(),m(h,{key:1},[ns,is,ls],64))]),_:1},8,["class"])]),_:1}),i(p,null,{default:n(()=>[i(d,{class:"text-slate-400 align-top shrink-0"},{default:n(()=>[cs]),_:1}),i(d,{class:C(["whitespace-normal",{"bg-red-50":!a.itemData||!a.itemData.name}])},{default:n(()=>[a.itemData&&a.itemData.name?(o(),m(h,{key:0},[f(u(a.itemData.name),1)],64)):(o(),m(h,{key:1},[os,ds,rs],64))]),_:1},8,["class"])]),_:1}),i(p,null,{default:n(()=>[i(d,{class:"text-slate-400 align-top shrink-0"},{default:n(()=>[_s]),_:1}),i(d,{class:C(["whitespace-normal",{"bg-yellow-50":!a.itemData||!a.itemData.description}])},{default:n(()=>[a.itemData&&a.itemData.description?(o(),m(h,{key:0},[f(u(a.itemData.description),1)],64)):(o(),m(h,{key:1},[ms,hs,us],64))]),_:1},8,["class"])]),_:1}),i(p,null,{default:n(()=>[i(d,{class:"text-slate-400 align-top shrink-0"},{default:n(()=>[fs]),_:1}),i(d,{class:C(["whitespace-normal",{"bg-red-50":!a.itemData||!a.itemData.liable}])},{default:n(()=>[a.itemData&&a.itemData.liable?(o(),m(h,{key:0},[f(u(a.itemData.liable.name),1)],64)):(o(),m(h,{key:1},[ps,bs,ks],64))]),_:1},8,["class"])]),_:1}),i(p,null,{default:n(()=>[i(d,{class:"text-slate-400 align-top shrink-0"},{default:n(()=>[gs]),_:1}),i(d,{class:C(["whitespace-normal",{"bg-red-50":!a.itemData||!a.itemData.team}])},{default:n(()=>[a.itemData&&a.itemData.team?(o(),m(h,{key:0},[f(u(l.teamNames),1)],64)):(o(),m(h,{key:1},[vs,Ss,ys],64))]),_:1},8,["class"])]),_:1}),i(p,null,{default:n(()=>[i(d,{class:"text-slate-400 align-top shrink-0"},{default:n(()=>[xs]),_:1}),i(d,{class:C(["whitespace-normal",{"bg-red-50":!a.itemData||!a.itemData.bank_accounts}])},{default:n(()=>[a.itemData&&a.itemData.team?(o(!0),m(h,{key:0},D(a.itemData.bank_accounts,(S,g)=>(o(),m("div",{key:g},[e("span",null,u(S.name)+" ("+u(t.bankAccountHideMask(S.account_number))+")",1),g!==Object.keys(a.itemData.bank_accounts).length-1?(o(),m(h,{key:0},[Bs,Cs],64)):R("",!0)]))),128)):(o(),m(h,{key:1},[Ds,ws,Ls],64))]),_:1},8,["class"])]),_:1})]),default:n(()=>[ss]),_:1})}var Ts=y(ts,[["render",$s]]);const js={name:"ProjectCreateView",components:{StepSave:Ts,StepAccounts:es,StepDescription:vt,StepTeam:dt,PageCard:G,LbSteps:_e,BaseSimpleButton:N},setup(){return{loaderStore:E()}},data(){return{steps:{},activeStepKey:"",sendData:{}}},computed:{disabledSave(){let t=!0;if(Object.keys(this.sendData).length!==0){const s=!this.sendData.name,a=!this.sendData.category||Object.keys(this.sendData.category).length===0,v=!this.sendData.liable||Object.keys(this.sendData.liable).length===0,c=!this.sendData.team||Object.keys(this.sendData.team).length===0,l=!this.sendData.main_bank_account||Object.keys(this.sendData.main_bank_account).length===0,d=!this.sendData.bank_accounts||Object.keys(this.sendData.bank_accounts).length===0;(a||s||v||c||l||d)&&(t=!1)}return t}},async created(){await this.fetchSteps(),await this.changeStep(this.steps[0])},methods:{async fetchSteps(){this.steps=await fetch("/dist/api/project_create_steps.json").then(t=>t.json())},changeStep(t){this.activeStepKey=t.key},prevStep(){this.$refs.Steps.prevStep()},nextStep(){this.$refs.Steps.nextStep()},toSendData(t,s){this.sendData[s]=t},save(){this.loaderStore.setAppProgressText("\u041F\u0440\u043E\u0435\u043A\u0442 \u0441\u043E\u0437\u0434\u0430\u0435\u0442\u0441\u044F..."),this.loaderStore.startAppProgress(!0),setTimeout(()=>{this.$notify({title:"\u041D\u043E\u0432\u044B\u0439 \u043F\u0440\u043E\u0435\u043A\u0442 \u0441\u043E\u0437\u0434\u0430\u043D!",text:"\u042F \u041C\u041E\u041B\u041E\u0414\u0415\u0426\u042C, \u042F \u0421\u0414\u0415\u041B\u042F\u041B\u042C!!!",duration:5e3,speed:1e3,type:"success"}),this.$router.push({name:"projects"}),this.loaderStore.startAppProgress(!1)},2e3)}}},As={class:"project-create__header flex"},Ms=e("h3",{class:"mb-3 mr-auto"},"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0440\u043E\u0435\u043A\u0442\u0430",-1),Rs={class:"flex"},Ns=f(" \u041D\u0430\u0437\u0430\u0434 "),Is=f(" \u0414\u0430\u043B\u0435\u0435 "),Os={key:0,class:"flex ml-auto pl-6"},Ps=f(" \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043F\u0440\u043E\u0435\u043A\u0442 ");function zs(t,s,a,v,c,l){const d=_("BaseSimpleButton"),p=_("StepDescription"),k=_("StepTeam"),S=_("StepAccounts"),g=_("StepSave"),T=_("LbSteps"),w=_("PageCard");return o(),B(w,{class:"project-create p-8"},{default:n(()=>[Object.keys(c.steps).length!==0?(o(),m(h,{key:0},[e("div",As,[Ms,e("div",Rs,[i(d,{disabled:c.activeStepKey===c.steps[0].key,class:"mr-2","is-outline":"",onClick:l.prevStep},{default:n(()=>[Ns]),_:1},8,["disabled","onClick"]),i(d,{disabled:c.activeStepKey==="save","is-elevated":"","is-primary":"",onClick:l.nextStep},{default:n(()=>[Is]),_:1},8,["disabled","onClick"])])]),i(T,{ref:"Steps","items-data":c.steps,onChange:l.changeStep},{footer:n(()=>[c.activeStepKey==="save"?(o(),m("div",Os,[i(d,{"is-elevated":"","is-primary":"",size:"large",onClick:s[7]||(s[7]=b=>l.save()),disabled:!l.disabledSave},{default:n(()=>[Ps]),_:1},8,["disabled"])])):R("",!0)]),default:n(()=>[j(e("div",null,[i(p,{onChangeCategory:s[0]||(s[0]=b=>l.toSendData(b,"category")),onChangeName:s[1]||(s[1]=b=>l.toSendData(b,"name")),onChangeDescription:s[2]||(s[2]=b=>l.toSendData(b,"description"))})],512),[[M,c.activeStepKey==="description"]]),j(e("div",null,[i(k,{onChangeLiable:s[3]||(s[3]=b=>l.toSendData(b,"liable")),onChangeTeam:s[4]||(s[4]=b=>l.toSendData(b,"team"))})],512),[[M,c.activeStepKey==="team"]]),j(e("div",null,[i(S,{onChangeMainBankAccount:s[5]||(s[5]=b=>l.toSendData(b,"main_bank_account")),onChangeBankAccounts:s[6]||(s[6]=b=>l.toSendData(b,"bank_accounts"))})],512),[[M,c.activeStepKey==="accounts"]]),j(e("div",null,[i(g,{"item-data":c.sendData},null,8,["item-data"])],512),[[M,c.activeStepKey==="save"]])]),_:1},8,["items-data","onChange"])],64)):R("",!0)]),_:1})}var Vs=y(js,[["render",zs]]);export{Vs as default};
